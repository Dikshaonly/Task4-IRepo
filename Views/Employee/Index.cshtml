@using Task4.Models
@model IEnumerable<Task4.Models.Employee>

@{
    ViewData["Title"] = "Employee";
}
<partial name = "_Message"/>
<style>
table, th, td {
  border: 1px solid black;
  border-collapse: collapse;
  text-align:center;
}
tr:nth-child(odd){
background-color:#D6EEEE; 
}
</style>
<h2 class="text-center">Employee's Data:</h2>
<form asp-action="Index" method="get" class="mb-3">
    <label>Go to page:</label>
    <input type="number" name="page" min="1" max="@ViewBag.TotalPages" class="form-control d-inline-block" style="width:120px;" />
    <span>of @ViewBag.TotalPages</span>
    <button type="submit" class="btn btn-primary">Go</button>
</form>
<p class="text-right">Page @ViewBag.Page of @ViewBag.TotalPages</p>
<table class="table">
<tr>
<th>Id</th>
<th>नाम</th>
<th>इमेल</th>
<th>फोन</th>
<th>लिङ्ग</th>
<th>विभाग</th>
<th>पदनाम</th>
<th colspan="3">कार्यहरू</th>
</tr>
@foreach(var item in Model){
    <tr>
    <td>@item.Eid</td>
    <td>@item.Name</td>
    <td>@item.Email</td>
  <td>@item.Phone</td>
  <td>@item.Gender</td>
    <td>@item.DepName</td>
    <td>@item.DesName</td>
  <td><a asp-controller="Employee" asp-action="Edit" asp-route-id="@item.Eid" class="text-decoration-none btn btn-primary">Edit</a></td>
   <td><a asp-controller = "Employee" asp-action = "Details" asp-route-id = "@item.Eid" class = "text-decoration-none btn btn-primary">Details</a></td>
  <td><button class = "btn btn-danger"
  data-bs-toggle="modal"
  data-bs-target="#deleteModal"
  data-url="@Url.Action("Delete", "Employee", new{id=item.Eid})">
  Delete</button></td>
</tr>
}
</table>
@if(ViewBag.Page>1){
<a asp-controller="Employee" asp-action="Index" asp-route-page="@(ViewBag.Page-1)" class="text-decoration-none text-center btn btn-primary col-sm-2 p-2">Previous</a>
}
@if(ViewBag.Page<ViewBag.TotalPages){
<a asp-controller="Employee" asp-action="Index" asp-route-page="@(ViewBag.Page+1)" class="text-decoration-none text-center btn btn-primary col-sm-2 p-2">Next</a>
}
  
  <a asp-controller="Employee" asp-action="Create" class="text-decoration-none text-center btn btn-primary w-100 p-2 mt-3">Add Employee</a>


@await Html.PartialAsync("_Popup")
<script>
    document.addEventListener("DOMContentLoaded", function () {
        var modal = document.getElementById("deleteModal");

        modal.addEventListener("show.bs.modal", function (event) {
            var button = event.relatedTarget;
            var url = button.getAttribute("data-url");

            var confirmBtn = document.getElementById("confirmDeleteBtn");
            confirmBtn.href = url;
        });
    });
</script>